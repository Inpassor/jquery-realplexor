/**
 * jquery-realplexor.js
 *
 * @author DmitryKoterov <dmitry.koterov@gmail.com>
 * @link https://github.com/DmitryKoterov/dklab_realplexor/blob/master/dklab_realplexor.js
 *
 * @author Inpassor <inpassor@yandex.com>
 * @link https://github.com/Inpassor/yii2-realplexor
 *
 * @version 0.1.1 (2016.10.11)
 */
(function(e,k,g){function h(a){e.extend(!0,this,a||{});this.host=g.location.host;this.uid=a.uid||"mpl"+(new Date).getTime();f[this.uid]=this;if(!this.url.match(/^\/\/([^/]+)/))throw"Dklab_Realplexor constructor argument must be fully-qualified URL, "+this.url+" given.";a=RegExp.$1;if(a!=this.host&&a.lastIndexOf("."+this.host)!=a.length-this.host.length-1)throw"Due to the standard XMLHttpRequest security policy, hostname in URL passed to Dklab_Realplexor ("+a+") must be equals to the current host ("+
this.host+") or be its direct sub-domain.";this.w&&this.i();g.domain=this.host;return this}var f={};e.h=function(a){if(e.B(a))return new h(a);if(f[a])return f[a];throw"Invalid parameters.";};e.h.u=function(a){var b=f[a];setTimeout(function(){b.c=g.getElementById(a).contentWindow.s;b.C&&b.g()},50)};e.h.m=function(a,b){try{return a.apply(null,b),null}catch(c){return""+c}};h.prototype={version:"1.32",uid:null,url:"",host:"",o:"",a:{},c:null,l:null,j:!1,b:null,i:function(){e("<iframe/>",{id:this.uid,
onload:'$.Realplexor._iframeLoaded("'+this.uid+'")',src:this.url+"?identifier=IFRAME&HOST="+this.host+"&version="+this.version}).A({position:"absolute",visibility:"hidden",width:"200px",height:"200px",left:"-1000px",top:"-1000px"}).v("body");this.j=!0},subscribe:function(a,b){this.a[a]||(this.a[a]={cursor:null,f:[]});for(var c=this.a[a].f,d=0;d<c.length;d++)if(c[d]===b)return this;c.push(b);return this},unsubscribe:function(a,b){if(!this.a[a])return this;if(null==b)return this.a[a].f=[],this;for(var c=
this.a[a].f,d=0;d<c.length;d++)if(c[d]===b){c.splice(d,1);break}return this},g:function(){this.j||this.i();this.b&&(clearTimeout(this.b),this.b=null);var a=this;if(!this.c)return this.b=setTimeout(function(){a.g()},30),this;this.c.g(this.a,this.m,(null!=this.l?this.l+"_":"")+this.o);return this}}})(jQuery,window,document);